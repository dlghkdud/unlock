{% extends 'base.html' %}
{%block content %}
<style>
    body{
        margin: 0;
        padding: 0;
        height: 100vh;
    }
</style>

<div class="area1" >
    <table class="table">
        <thead>
            <tr>
                <th>친구</th>     
            </tr>
        </thead>
        <tbody>
            {% if follow %}
                        
            {%for user in follow.to_user.all%}
            <tr>
                <td>{{user.profile.nickname}}
                    <a href = "{% url 'common:unfollowing' to_user_id=user.id %}" data-url = :"{% url 'common:unfollowing' to_user_id=user.id %}">
                    삭제
                    </a>
                </td>
            </tr>
            {% endfor %}
            {% else %}
            <tr>
                <td colspan="4">친구가 없습니다.</td>
            </tr>
            {% endif %}
        </tbody>
    </table>
</div>      
<div class ="area2">
    <table class="table">
        <thead>
            <tr>
                <th>친구추가</th>     
            </tr>
        </thead>
        <tbody>
            {% if userList %}
            {%for to_user in userList.all%}
            <tr>
                <td>{{to_user.profile.nickname}}
                    <a href = "{% url 'common:following' to_user_id=to_user.id %}" data-url = :"{% url 'common:following' to_user_id=to_user.id %}">
                    추가
                    </a>
                </td>
            </tr>
            {% endfor %}
            {% else %}
            <tr>
                <td colspan="4">친구가 없습니다.</td>
            </tr>
            {% endif %}
        </tbody>
     </table>
</div>
{% endblock %}


{% block script %}
<script type='text/javascript'>
const follower_elements = document.getElementsByClassName("follower");
Array.from(follower_elements).forEach(function(element){
    element.addEventListener('click',function(){
        if(confirm("팔로우 하시겠습니까?")){
            location.href = this.dataset.uri;
        };
    });
});

const unfollower_elements = document.getElementsByClassName("unfollower");
Array.from(unfollower_elements).forEach(function(element){
    element.addEventListener('click',function(){
        if(confirm("삭제 하시겠습니까?")){
            location.href = this.dataset.uri;
        };
    });
});
</script>

{% endblock %}